<h2>More Info</h2>

<% # required for autocompletion %>
<input type="hidden" name="institution_id"
       value="<%= @resource.location.repository.institution.id %>">

<%= form_for @resource, url: form_url, remote: true do |f| %>
    <%= render 'shared/error_messages', :object => f.object %>

    <div class="form-group">
      <%= f.label :significance %>
      <button type="button" class="btn btn-default help" data-container="body"
              data-toggle="popover" data-placement="right"
              data-content="Here you may assign a level of significance of this item at your organization. You may want to differentiate between items of higher and lesser significance when apportioning funds for preservation. Choosing the level of significance here will not impact your preservation assessment score but can allow you to order your decision list by significance level. OPTIONAL.">
        ?
      </button>

      <div class="radio">
        <%= f.radio_button :significance, '0' %>
        <%= f.label :significance, 'Low', value: '0' %>
      </div>
      <div class="radio">
        <%= f.radio_button :significance, '0.5' %>
        <%= f.label :significance, 'Moderate', value: '0.5' %>
      </div>
      <div class="radio">
        <%= f.radio_button :significance, '1' %>
        <%= f.label :significance, 'High', value: '1' %>
      </div>
    </div>

    <div class="form-group addable_removable">
      <%= f.label :creators, 'Creator(s)' %>

      <%= f.fields_for :creators do |g| %>
          <div class="addable_removable_input_group well">
            <%= select('resource[creators_attributes][0]', 'creator_type',
                       options_for_select([['Person', CreatorType::PERSON],
                                           ['Company', CreatorType::COMPANY]]),
                       { include_blank: false },
                       { class: 'form-control' }) %>
            <%= g.text_field :name, class: 'form-control' %>
            <button class="btn btn-default btn-sm remove" type="button">
              <span class="glyphicon glyphicon-minus"></span>
            </button>
          </div>
      <% end %>
      <button class="btn btn-default btn-sm add" type="button">
        <span class="glyphicon glyphicon-plus"></span>
      </button>
    </div>

    <div class="form-group addable_removable">
      <%= f.label :resource_dates, 'Date(s)' %>

      <%= f.fields_for :resource_dates do |g| %>
          <div class="addable_removable_input_group well">
            <%= g.label 'Type' %>
            <%= g.select('date_type',
                         options_for_select([['Single', DateType::SINGLE],
                                             ['Span/Inclusive', DateType::SPAN],
                                             ['Bulk', DateType::BULK]],
                                            selected: g.object.date_type),
                         { include_blank: false },
                         { class: 'form-control date_type' }) %>
            <div class="input-group begin_date">
              <%= g.label 'Begin date' %>
              <div class="row">
                <div class="col-sm-4">
                  <%= g.number_field :begin_year, class: 'form-control year',
                                     min: 1, max: Time.now.year, maxlength: 4,
                                     placeholder: 'YYYY' %>
                </div>
                <div class="col-sm-4">
                  <%= g.number_field :begin_month, class: 'form-control month',
                                     min: 1, max: 12, maxlength: 2, placeholder: 'MM' %>
                  <span class="help-block">(optional)</span>
                </div>
                <div class="col-sm-4">
                  <%= g.number_field :begin_day, class: 'form-control day',
                                     min: 1, max: 31, maxlength: 2, placeholder: 'DD' %>
                  <span class="help-block">(optional)</span>
                </div>
              </div>
            </div>
            <div class="input-group end_date">
              <%= g.label 'End date' %>
              <div class="row">
                <div class="col-sm-4">
                  <%= g.number_field :end_year, class: 'form-control year',
                                     min: 1, max: Time.now.year, maxlength: 4,
                                     placeholder: 'YYYY' %>
                </div>
                <div class="col-sm-4">
                  <%= g.number_field :end_month, class: 'form-control month',
                                     min: 1, max: 12, maxlength: 2, placeholder: 'MM' %>
                  <span class="help-block">(optional)</span>
                </div>
                <div class="col-sm-4">
                  <%= g.number_field :end_day, class: 'form-control day',
                                     min: 1, max: 31, maxlength: 2, placeholder: 'DD' %>
                  <span class="help-block">(optional)</span>
                </div>
              </div>
            </div>
            <div class="input-group date">
              <%= g.label 'Date' %>
              <div class="row">
                <div class="col-sm-4">
                  <%= g.number_field :year, class: 'form-control year',
                                     min: 1, max: Time.now.year, maxlength: 4,
                                     placeholder: 'YYYY' %>
                </div>
                <div class="col-sm-4">
                  <%= g.number_field :month, class: 'form-control month',
                                     min: 1, max: 12, maxlength: 2, placeholder: 'MM' %>
                  <span class="help-block">(optional)</span>
                </div>
                <div class="col-sm-4">
                  <%= g.number_field :day, class: 'form-control day',
                                     min: 1, max: 31, maxlength: 2, placeholder: 'DD' %>
                  <span class="help-block">(optional)</span>
                </div>
              </div>
            </div>
            <button class="btn btn-default btn-sm remove" type="button">
              <span class="glyphicon glyphicon-minus"></span>
            </button>
          </div>
      <% end %>

      <button class="btn btn-default btn-sm add" type="button">
        <span class="glyphicon glyphicon-plus"></span>
      </button>
    </div>

    <div class="form-group">
      <%= f.label :language %>
      <%= f.collection_select :language_id, Language.all, :id, :english_name,
                              { include_blank: "That of Institution (#{@resource.location.repository.institution.language.english_name})" },
                              { class: 'form-control' } %>
    </div>

    <div class="form-group addable_removable">
      <%= f.label :subjects, 'Subject(s)' %>

      <%= f.fields_for :subjects do |g| %>
          <div class="addable_removable_input_group">
            <div class="col-sm-11">
              <%= g.text_field :name, class: 'form-control typeahead resource_subject' %>
            </div>
            <div class="col-sm-1">
              <button class="btn btn-default remove" type="button">
                <span class="glyphicon glyphicon-minus"></span>
              </button>
            </div>
          </div>
      <% end %>

      <button class="btn btn-default btn-sm add" type="button">
        <span class="glyphicon glyphicon-plus"></span>
      </button>
    </div>

    <div class="form-group addable_removable">
      <%= f.label :extents, 'Extent(s)' %>

      <%= f.fields_for :extents do |g| %>
          <div class="addable_removable_input_group">
            <div class="col-sm-11">
              <%= g.text_field :name, class: 'form-control' %>
            </div>
            <div class="col-sm-1">
              <button class="btn btn-default remove" type="button">
                <span class="glyphicon glyphicon-minus"></span>
              </button>
            </div>
          </div>
      <% end %>

      <button class="btn btn-default btn-sm add" type="button">
        <span class="glyphicon glyphicon-plus"></span>
      </button>
    </div>

    <div class="form-group">
      <%= f.label :rights %>
      <%= f.text_area :rights, class: 'form-control' %>
    </div>

    <div class="form-group">
      <%= f.label :description %>
      <%= f.text_area :description, class: 'form-control' %>
    </div>

    <div class="form-group addable_removable">
      <%= f.label :resource_notes, 'Note(s)' %>

      <%= f.fields_for :resource_notes do |g| %>
          <div class="addable_removable_input_group">
            <%= g.text_area :value, class: 'form-control' %>
            <button class="btn btn-default remove" type="button">
              <span class="glyphicon glyphicon-minus"></span>
            </button>
          </div>
      <% end %>

      <button class="btn btn-default btn-sm add" type="button">
        <span class="glyphicon glyphicon-plus"></span>
      </button>
    </div>
<% end %>
