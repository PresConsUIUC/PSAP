<h2>Basic Info</h2>

<%= form_for @resource, url: form_url, remote: true do |f| %>
    <%= render 'shared/error_messages', :object => f.object %>

    <div class="form-group">
      <%= f.label :name %>
      <button type="button" class="btn btn-default help" data-container="body" data-toggle="popover" data-placement="right"
              data-content="<p>Name or title used to refer to this <b>resource</b>. REQUIRED.</p>
            <p>Examples:</p>
            <ul>
                <li>William G. Hill Papers;</li>
                <li>Crystal Lake Map, 1809;</li>
                <li>Weyland-Yutani Collection;</li>
                <li>3000 Miles from Finland;</li>
                <li>Herald-Whig Photographic File;</li>
                <li>Rotary International Center Proposal</li>
            </ul>">
        ?
      </button>
      <%= f.text_field :name, class: 'form-control' %>
    </div>

    <div class="form-group">
      <%= f.label :local_identifier %>
      <button type="button" class="btn btn-default help" data-container="body" data-toggle="popover" data-placement="right"
              data-content="<p>Identification number or code assigned to each resource at your organization. REQUIRED.</p>

                <p>Identifiers are typically unique, and often sequential. But whatever works for your organization
                and makes sense for your collections is valid. If this resource has none, assign a temporary or
                placeholder ID.</p>

                <p>Examples:</p>
                <ul>
                    <li>85.000  (First item accessioned in 1985)</li>
                    <li>11/6/20  (Record group, series, item numbers)</li>
                    <li>film187  (187th film in collection)</li>
                    <li>PP-ER1  (Personal papers [PP] of Ellen Ripley [ER], the first [1] with these initials)</li>
                </ul>">
        ?
      </button>
      <%= f.text_field :local_identifier, class: 'form-control' %>
    </div>

    <div class="form-group">
      <%= f.label :resource_type %>
      <button type="button" class="btn btn-default help" data-container="body" data-toggle="popover" data-placement="right"
              data-content="Is this an Item or Collection? Indicate the hierarchical level of the resource. REQUIRED.">
        ?
      </button>
      <%= select('resource', 'resource_type',
                 options_for_select([['Collection', ResourceType::COLLECTION],
                                     ['Item', ResourceType::ITEM]]),
                 { include_blank: false },
                 { class: 'form-control' }) %>
    </div>

    <div class="form-group">
      <%= f.label :parent_id, 'Parent Resource' %>
      <button type="button" class="btn btn-default help" data-container="body" data-toggle="popover" data-placement="right"
              data-content="Indicate the parent collection or group in which the resource resides. If this resource is a collection at the top-level, or is unassociated with any established collection or group, select <em>None (Top-Level)</em>. REQUIRED.">
        ?
      </button>
      <%= select('resource', 'parent_id',
                 resource_hierarchy_options_for_select(@resource.location),
                 { include_blank: 'None (Top-Level)' },
                 { class: 'form-control' }) %>
    </div>

    <div class="form-group">
      <%= f.label :format %>
      <button type="button" class="btn btn-default help" data-container="body" data-toggle="popover" data-placement="right"
              data-content="Select the appropriate format of the resource (item or collection part) you are assessing. If you need help, select <em>Format ID Guide</em> from the top utility bar to determine what you have.">
        ?
      </button>
      <%= f.collection_select :format_id, Format.all.order(:name), :id, :name,
                              { include_blank: false },
                              { class: 'form-control' } %>
    </div>

    <div class="form-group addable_removable">
      <%= f.label :resource_dates, 'Date(s)' %>

      <%= f.fields_for :resource_dates do |g| %>
          <div class="addable_removable_input_group well">
            <%= g.label 'Type' %>
            <%= g.select('date_type',
                       options_for_select([['Single', DateType::SINGLE],
                                           ['Span/Inclusive', DateType::SPAN],
                                           ['Bulk', DateType::BULK]],
                                          selected: g.object.date_type),
                       { include_blank: false },
                       { class: 'form-control date_type' }) %>
            <div class="input-group begin_date">
              <%= g.label 'Begin date' %>
              <div class="row">
                <div class="col-sm-4">
                  <%= g.number_field :begin_year, class: 'form-control year',
                                     min: 1, max: Time.now.year, maxlength: 4,
                                     placeholder: 'YYYY' %>
                </div>
                <div class="col-sm-4">
                  <%= g.number_field :begin_month, class: 'form-control month',
                                     min: 1, max: 12, maxlength: 2, placeholder: 'MM' %>
                  <span class="help-block">(optional)</span>
                </div>
                <div class="col-sm-4">
                  <%= g.number_field :begin_day, class: 'form-control day',
                                     min: 1, max: 31, maxlength: 2, placeholder: 'DD' %>
                  <span class="help-block">(optional)</span>
                </div>
              </div>
            </div>
            <div class="input-group end_date">
              <%= g.label 'End date' %>
              <div class="row">
                <div class="col-sm-4">
                  <%= g.number_field :end_year, class: 'form-control year',
                                     min: 1, max: Time.now.year, maxlength: 4,
                                     placeholder: 'YYYY' %>
                </div>
                <div class="col-sm-4">
                  <%= g.number_field :end_month, class: 'form-control month',
                                     min: 1, max: 12, maxlength: 2, placeholder: 'MM' %>
                  <span class="help-block">(optional)</span>
                </div>
                <div class="col-sm-4">
                  <%= g.number_field :end_day, class: 'form-control day',
                                     min: 1, max: 31, maxlength: 2, placeholder: 'DD' %>
                  <span class="help-block">(optional)</span>
                </div>
              </div>
            </div>
            <div class="input-group date">
              <%= g.label 'Date' %>
              <div class="row">
                <div class="col-sm-4">
                  <%= g.number_field :year, class: 'form-control year',
                                     min: 1, max: Time.now.year, maxlength: 4,
                                     placeholder: 'YYYY' %>
                </div>
                <div class="col-sm-4">
                  <%= g.number_field :month, class: 'form-control month',
                                     min: 1, max: 12, maxlength: 2, placeholder: 'MM' %>
                  <span class="help-block">(optional)</span>
                </div>
                <div class="col-sm-4">
                  <%= g.number_field :day, class: 'form-control day',
                                     min: 1, max: 31, maxlength: 2, placeholder: 'DD' %>
                  <span class="help-block">(optional)</span>
                </div>
              </div>
            </div>
            <button class="btn btn-default btn-sm remove" type="button">
              <span class="glyphicon glyphicon-minus"></span>
            </button>
      <% end %>

      </div>
      <button class="btn btn-default btn-sm add" type="button">
        <span class="glyphicon glyphicon-plus"></span>
      </button>
    </div>

    <div class="form-group addable_removable">
      <%= f.label :creators, 'Creator(s)' %>

      <%= f.fields_for :creators do |g| %>
          <div class="addable_removable_input_group well">
            <%= select('resource[creators_attributes][0]', 'creator_type',
                       options_for_select([['Person', CreatorType::PERSON],
                                           ['Company', CreatorType::COMPANY]]),
                       { include_blank: false },
                       { class: 'form-control' }) %>
            <%= g.text_field :name, class: 'form-control' %>
            <button class="btn btn-default btn-sm remove" type="button">
              <span class="glyphicon glyphicon-minus"></span>
            </button>
      <% end %>

      </div>
      <button class="btn btn-default btn-sm add" type="button">
        <span class="glyphicon glyphicon-plus"></span>
      </button>
    </div>

    <div class="form-group addable_removable">
      <%= f.label :subjects, 'Subject(s)' %>

      <%= f.fields_for :subjects do |g| %>
          <div class="addable_removable_input_group">
            <div class="input-group">
              <%= g.text_field :name, class: 'form-control' %>
              <span class="input-group-btn">
                <button class="btn btn-default remove" type="button">
                  <span class="glyphicon glyphicon-minus"></span>
                </button>
              </span>
            </div>
          </div>
      <% end %>

      <button class="btn btn-default btn-sm add" type="button">
        <span class="glyphicon glyphicon-plus"></span>
      </button>
    </div>

    <div class="form-group addable_removable">
      <%= f.label :extents, 'Extent(s)' %>

      <%= f.fields_for :extents do |g| %>
          <div class="addable_removable_input_group">
            <div class="input-group">
              <%= g.text_field :name, class: 'form-control' %>
              <span class="input-group-btn">
                <button class="btn btn-default remove" type="button">
                  <span class="glyphicon glyphicon-minus"></span>
                </button>
              </span>
            </div>
          </div>
      <% end %>

      <button class="btn btn-default btn-sm add" type="button">
        <span class="glyphicon glyphicon-plus"></span>
      </button>
    </div>

    <div class="form-group">
      <%= f.label :local_identifier %>
      <%= f.text_field :local_identifier, class: 'form-control' %>
    </div>

    <div class="form-group">
      <%= f.label :rights %>
      <%= f.text_area :rights, class: 'form-control' %>
    </div>

    <div class="form-group">
      <%= f.label :description %>
      <%= f.text_area :description, class: 'form-control' %>
    </div>

    <div class="form-group addable_removable">
      <%= f.label :resource_notes, 'Note(s)' %>

      <%= f.fields_for :resource_notes do |g| %>
          <div class="addable_removable_input_group">
              <%= g.text_area :value, class: 'form-control' %>
              <button class="btn btn-default remove" type="button">
                <span class="glyphicon glyphicon-minus"></span>
              </button>
          </div>
      <% end %>

      <button class="btn btn-default btn-sm add" type="button">
        <span class="glyphicon glyphicon-plus"></span>
      </button>
    </div>
<% end %>